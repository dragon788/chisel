{"name":"Chisel","tagline":"A simple python static blog generation utility.","body":"# Chisel\r\n\r\nWritten by [David Zhou][dz] in [python][py], forked and enhanced by [Chyetanya Kunte][c], [Chisel][ch] is an extremely lightweight (just 8kB) blog generating script. \r\n\r\nThis fork includes the following additions and enhancements:\r\n\r\n- Smartypants content parsing to emit typographically nicer quotes, proper em and en dashes, etc.\r\n- A shorter (just year based) permalink structure.\r\n- RSS feed for posts.\r\n- Page support with markdown. (Use `{% markdown %}Markdown formatted content here.{% endmarkdown %}`)\r\n- Support for Page titles in title tag for permalinks added in templates.\r\n- Supports clean URLs.\r\n- Works just fine with [MathJax][mj] for rendering using [LaTeX][tx] (math syntax). (Just remember to use `\\newline` for multiple lines instead of `\\n`. For mathjax support, see the section below.)\r\n- Sitemap auto-generation for posts (gzipped).\r\n- List number of posts using `{{ entries | length }}` in Jinja (archive.html) template.\r\n- Time taken to read a post using `{{ entry.content | wordcount // 300 + 1 }} min read`, where 300 is the number of words a typical reader reads per minute. (Posts less than 1 minute long to read will approximate to 1 min.)\r\n\r\n## What it does not do\r\n\r\nChisel keeps it simple and stupid. And so, there is\r\n\r\n- No taxonomy support, i.e., no categories, and no tags.\r\n- No built-in search. (A simple json based search script may easily be developed together with a gzipped flat file index for text query.)\r\n- Multiple posts in a day, since the time stamp is simple without the time element. This does not mean multiple posts do not show up. They will just be ordered by title alphabetically.\r\n\r\n## What it does best\r\n\r\n- No loss of fidelity. All posts would be plain text, which kind of makes it timeless. Great for archiving. Burn on a CD, or save it on a USB stick.\r\n- Regenerate the entire site again if one just has the native markdown draft posts, and Chisel + templates.\r\n- It's incredibly lightweight -- less than 8kB! (Compare that with anything out there, and they all seem like they weigh a ton, not to mention the complexity of install, maintain, and backup.)\r\n- Zero security issues. Generate site locally, and upload only the thus created html files out of markdown post drafts. \r\n- Pure static site. Pretty robust to network spikes, and heavy loads. No server-side scripting ensures no overload.\r\n- Helps you blog offline, run your own private blog, information system, if you don't want to host it on the web, and still have a web like interface.\r\n- Written in python: Simple to understand, simple to modify, but most of all, simpler to use. (Knowledge of python is not required, except for installation, which is explained in detail below.)\r\n\r\n## How it works\r\n\r\n1. Write the post in Markdown, save it as `post-title.md` or `posttitle.md` (or post_title.md) in a designated folder, say, `posts`. \r\n\r\n2. Run `python chisel.py` in a Terminal, and Chisel will parse all `.md`, `.markdown` or `.mdown` files in `posts` folder to another designated folder, say `www` in html -- ready to be served using a web server.\r\n\r\n3. Sync [See Note] all files and folders from the local `www` folder to the root of your web host, and you've got a fully functioning web site.\r\n\r\n(Note: There are a number of ways one can sync files, [git][], [rsync][], or plain vanilla (s)[ftp][]. The sync can be further automated using a (ana)cron job, or via the Automator.)\r\n\r\n## Requirements\r\n\r\nIf you are using a Mac or Linux, then python comes pre-installed. In addition, you'll need just a few python packages for Chisel to function. They are as follow:\r\n\r\n1. [Jinja2][ji] is a templating engine, developed by [Pocoo Team][pt].\r\n2. [Markdown][md] is a text markup language, developed by [John Gruber][jg]. It's nearly plain text, i.e., zero learning curve, which is why it's awesome.\r\n3. [jinja_markdown][jm] to render markdown in pages.\r\n\r\n#### Install these on a [Mac OS X][m] via [pip][] -- python package installer:\r\n\r\n    $ sudo easy_install pip\r\n    Password:\r\n    $ sudo pip install jinja2 markdown jinja2_markdown\r\n    \r\n#### On [Ubuntu][u] (Debian) linux:\r\n\r\n    $ sudo apt-get install python-pip\r\n    Password:\r\n    $ sudo pip install jinja2 markdown jinja2_markdown\r\n\r\nTo update these packages, you may run the following:\r\n\r\n    $ sudo pip install --upgrade jinja2 markdown jinja2_markdown\r\n\r\n## Create a site structure on your computer (This is just an example)\r\n\r\n    $ mkdir ~/site\r\n    $ cd ~/site\r\n    $ mkdir posts www chisel\r\n\r\nNow download Chisel as a zip file or via git (`git clone git://github.com/ckunte/chisel.git`). Move the unzipped contents into `chisel` folder created above. The structure should look like this following:\r\n\r\n    ~/site/\r\n    ~/site/posts/\r\n    ~/site/www/\r\n    ~/site/chisel/\r\n                 /README.md\r\n                 /chisel.py\r\n                 /templates/\r\n                           /archive.html\r\n                           /base.html\r\n                           /detail.html\r\n                           /home.html\r\n\r\nWhile it is not required, keeping `chisel`, `posts`, and `www` separate is a good idea. It helps keep chisel folders clean (for future updates), aside from keeping the tool separated from the content you create using it (`posts`, and `www`).\r\n\r\nRemember to open and edit templates, particularly `base.html` as it contains site name, description and other `meta` into in the `<head>` section hard-coded. In addition, you will need to update the settings below.\r\n\r\n### Updating Settings to suit\r\n\r\nOpen `chisel.py` in a text editor and have a look at the section Settings. You may need to update the following:\r\n\r\n    # Settings\r\n    BASEURL = \"http://mysite.net/\" # Must end with a trailing slash.\r\n    SOURCE = \"../posts/\"             # Must end with a trailing slash.\r\n    DESTINATION = \"../www/\"          # Must end with a trailing slash.\r\n    HOME_SHOW = 15                   # Number of entries to show on homepage.\r\n    TEMPLATE_PATH = \"./templates/\"   # Path of Jinja2 template files.\r\n    TIME_FORMAT = \"%b %d, %Y\"\r\n    ENTRY_TIME_FORMAT = \"%m/%d/%Y\"\r\n    FORMAT = lambda text: markdown.markdown(text, ['footnotes','smartypants',])\r\n\r\n### Usage\r\n\r\n    $ cd ~/Sites/chisel\r\n    $ python chisel.py\r\n\r\n### Sample Entry\r\n\r\n`sample.markdown` (Note: Filenames shall not have spaces. Good examples: `hotel-california.md`, `i_love_cooking.md`, and so on):\r\n\r\n    Title of the post\r\n    3/14/1879\r\n\r\n    Content in Markdown here onward.\r\n\r\n    Next paragraph.\r\n\r\n    Next paragraph.\r\n\r\nThe very simple post entry format, shown above, is as follows:\r\n\r\n- Line 1: Enter a Title.\r\n- Line 2: Enter date in m/d/Y format.\r\n- Line 3: Blank line.\r\n- Line 4: Content in Markdown here onward.\r\n\r\n### Adding Steps\r\n\r\nUse the @step decorator. The main loop passes in the master file list and jinja environment. Here's an example of a `@step` decorator added to `chisel.py` to generate a colophon page:\r\n\r\nAdd this below in `chisel.py` code:\r\n\r\n    @step\r\n    def gen_colophon(f, e):\r\n        write_file('colophon' + URLEXT, e.get_template('colophon.html').render(entry=file))\r\n\r\n### Clean URLs - Howto\r\n\r\nGitHub (via nginx rewrite I think) recognizes post files ending with `.html` or feed URLs ending with `.xml`. So, generate the files with these extensions as usual, but tell chisel to skip the extensions in permalinks using settings. (Follow up by excluding .html extension in hard links in Jinja templates too.)\r\n\r\nThe default setting in chisel now -- assuming server recognizes `.html` extension but does not require its inclusion when referring to a URL -- is as follows:\r\n\r\n    URLEXT = \"\"\r\n    \r\nThis above is what I use. (Note that you should not set both to empty or `.html` strings in the above; this would lead to unintended results.)\r\n\r\nThe fallback option is as follows:\r\n\r\n    URLEXT = \".html\"\r\n\r\nThis above setting would be suitable if your server does not recognize `.html` files if they are referred to without `.html` extension in URLs.\r\n\r\n#### Local server at home\r\n\r\nSince I also run chisel on my home server, here's what I had to do to enable rewrite using nginx web server:\r\n\r\nI edited the `default` file, which serves our local family site, in the following folder on my home server:\r\n\r\n    cd /etc/nginx/sites-enabled\r\n\r\nand added this following in it:\r\n\r\n    location / {\r\n        try_files $uri.html $uri/ =404;\r\n        error_page 404 = /404.html;\r\n    }\r\n\r\nI now get clean URLs with these above settings.\r\n\r\n### Can I use this to run a site locally, like offline?\r\n\r\nYes! Just navigate to `~/site/www` and run the following to start a simple HTTP server in Terminal:\r\n\r\n    $ python -m SimpleHTTPServer\r\n\r\nThen, point your browser to: `http://localhost:8000` and your site is live on your computer.\r\n\r\n### I have a large number of posts in WordPress. How do I convert?\r\n\r\nHave a look at Thomas Fr√∂ssman's tool, [exitwp][ep]. While it's written primarily for Jekyll, it does a very good job of converting all WordPress posts to Markdown post -- one file per post. Each post thus converted shows some preformatted lines in the beginning. much of which you don't need in Chisel (You only require Title and Date in the format illustrated above.) You could either manually edit each markdown file, or you could fork Thomas's exitwp and change the following lines (between line 253 and 259) from\r\n\r\n    yaml_header = {\r\n          'title': i['title'],\r\n          'date': i['date'],\r\n          'slug': i['slug'],\r\n          'status': i['status'],\r\n          'wordpress_id': i['wp_id'],\r\n        }\r\n\r\nto\r\n\r\n       yaml_header = {\r\n          i['title'],\r\n          i['date'],\r\n        }\r\n\r\nFurther, the date would need a fix to read as m/d/Y. But at least for now, it reduces your edits to just changing dates. Or you could write a [shell script][ss] to chuck out needless information generated for Jekyll to suit Chisel.\r\n\r\n## I miss pinging my site via Pingomatic. How do I?\r\n\r\nCreate and save a bookmarklet via [Pingomatic][p]. Alternatively, put the following script (hat-tip: [Ned Batchelder][nb] for this script) in a file, say `ping.py`, and run `python ping.py` (please do remember to change the title and URL in the script below):\r\n\r\n    # encoding: utf-8\r\n    #!/usr/bin/env python\r\n\r\n    import xmlrpclib\r\n\r\n    # Ping-o-matic the Pinging service:\r\n    ps = \"http://rpc.pingomatic.com/RPC2\"\r\n\r\n    # Your site's title, url and rss:\r\n    title = \"Site title\"\r\n    url = \"http://mysite.net\"\r\n    rss = \"http://mysite.net/log/rss\"\r\n\r\n    remoteServer = xmlrpclib.Server(ps)\r\n    ret = remoteServer.weblogUpdates.ping(title, url, rss)\r\n    print title, ret['message']\r\n\r\nTo map by pinging each and every post from an entire site, one may use a script like below using archive.html page as the sitemap:\r\n\r\n    #!/usr/bin/env python\r\n    # encoding: utf-8\r\n    \"\"\"\r\n    mapsite.py\r\n    2014-06-07: Created by ckunte.\r\n    2014-08-28: Updated to urllib3, and beautifulsoup4.\r\n\r\n    Requirements:\r\n        1. beautifulsoup4 module. (pip install beautifulsoup4)\r\n        2. A file named srvclst.txt with ping servers list.\r\n        \r\n    Usage:\r\n    \r\n        $ python mapsite.py\r\n\r\n    \"\"\"\r\n    import bs4\r\n    import urllib3\r\n    import xmlrpclib\r\n\r\n    #--- Start edit: site details ---------------------\r\n    # For absolute links: SITEURL = ''\r\n    # For relative links: SITEURL = 'http://mysite.com'\r\n    SITEURL = 'http://mysite.com'\r\n    SITETITLE = 'Site title'\r\n    SITEMAP = 'http://mysite.com/log/archive.html'\r\n    #--- End edit. ------------------------------------\r\n\r\n    def main():\r\n        servers = [line.strip() for line in open('srvclst.txt', 'r')]\r\n        http = urllib3.PoolManager()\r\n        html_page = http.urlopen('GET', SITEMAP, preload_content=False)\r\n        soup = bs4.BeautifulSoup(html_page)\r\n        for link in soup.find_all('a'):\r\n            title = SITETITLE + \": \" + link.contents[0]\r\n            url = SITEURL + link.get('href')\r\n            for ps in servers:\r\n                remoteServer = xmlrpclib.Server(ps)\r\n                push = remoteServer.weblogUpdates.ping(title, url)\r\n                print title, push['message']\r\n            pass\r\n        pass\r\n\r\n    if __name__ == '__main__':\r\n        main()\r\n\r\nIn addition, all update services may be populated in a file called `srvclst.txt`, e.g.,\r\n\r\n    http://rpc.pingomatic.com/RPC2\r\n    http://blogsearch.google.com/ping/RPC2\r\n    http://rpc.weblogs.com/RPC2\r\n\r\nStepping through the code above, here's what it does:\r\n\r\n- Lines between 20 and 22 require some basic input, viz., sitemap url, site title, and site url. (For absolute urls, site url may be left blank. Since, I use relative urls, I define a root.)\r\n- Line 22 defines the sitemap, and is called into BeautifulSoup on line 29.\r\n- Line 26 converts a list of servers/services (one per line) from `srvclst.txt` and turns it in to a proper python list.\r\n- Each link (within `a` html tags), together with the linked text as its title in sitemap (or my Archive page) is pushed to all servers/services in the list --- defined above (line 30).\r\n- Line 36 prints the title of the page, and each server's response to the push.\r\n\r\n## My blog is now powered by Chisel. How do I automate all this?\r\n\r\nEasy. Put this in a script (say, `log.sh`, for example) like the example below (do take note of folders, these are from my set-up, if yours is setup differently, then do make those changes in lines 3, 5, and 10 below):\r\n\r\n    #!/usr/bin/env sh\r\n    echo \"\"\r\n    cd ~/Sites/chisel\r\n    python chisel.py\r\n    cd ~/Sites/mysiterepo.github.io\r\n    echo \"Updating log..\"\r\n    git add -A\r\n    git commit -m 'Updating log.'\r\n    git push -u origin master\r\n    cd ~/Sites/chisel\r\n    echo \"Pinging Pingomatic..\"\r\n    python ping.py\r\n    cd ~/\r\n    echo \"\"\r\n    echo \"All done.\"\r\n\r\nWhen you're ready to generate and post it to your site, run `sh log.sh`, and your post(s) are published.\r\n\r\n## MathJax support\r\n\r\nFor enabling MathJax (TEX-AMS_HTML), the following script may be added in the `head` section:\r\n\r\n    <script defer src=\"https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML\"></script>\r\n    \r\nThe URL may be suitably changed to suit if other forms of markup is desired for for rendering. Please see mathjax website for more details on implementation.\r\n\r\nFor inline TEX rendering, the following may be added before the `</head>` tag in `base.html` template.\r\n\r\n    <script type=\"text/x-mathjax-config\">\r\n       MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});\r\n    </script>\r\n\r\nFor a new equation, remember to use `\\newline` instead of `\\n`.\r\n\r\n[ss]: http://www.cyberciti.biz/faq/unix-linux-replace-string-words-in-many-files/\r\n[ep]: https://github.com/thomasf/exitwp\r\n[dz]: https://github.com/dz\r\n[ch]: https://github.com/ckunte/chisel\r\n[ftp]: http://panic.com/transmit/\r\n[py]: http://www.python.org/\r\n[ji]: http://jinja.pocoo.org/docs/\r\n[md]: http://daringfireball.net/projects/markdown/\r\n[sp]: http://daringfireball.net/projects/smartypants/\r\n[ad]: http://www.dalkescientific.com\r\n[pt]: http://www.pocoo.org/ \"Led by Georg Brandl and Armin Ronacher.\"\r\n[jg]: http://daringfireball.net/ \"John Gruber\"\r\n[rsync]: http://en.wikipedia.org/wiki/Rsync\r\n[git]: http://git-scm.com\r\n[u]: http://www.ubuntu.com/\r\n[m]: http://www.apple.com/macosx\r\n[pip]: http://pypi.python.org/pypi/pip\r\n[nb]: http://nedbatchelder.com/blog/200406/pingomatic_and_xmlrpc.html \"Ping-o-matic and xml-rpc\"\r\n[p]: http://pingomatic.com/\r\n[mj]: http://www.mathjax.org/\r\n[tx]: http://en.wikipedia.org/wiki/LaTeX\r\n[c]: https://github.com/ckunte\r\n[jm]: https://github.com/danielchatfield/jinja2_markdown","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}